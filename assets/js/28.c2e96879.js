(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{372:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"使用-homebrew-安装-mysql-全过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-homebrew-安装-mysql-全过程"}},[s._v("#")]),s._v(" 使用 Homebrew 安装 Mysql 全过程")]),s._v(" "),a("blockquote",[a("p",[s._v("环境\n操作系统：macOS Sierra Version 10.12.1\nHomebrew：1.1.7")])]),s._v(" "),a("p",[s._v("步骤:")]),s._v(" "),a("ul",[a("li",[s._v("安装 Homebrew，详细步骤参见 "),a("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Homebrew"),a("OutboundLink")],1),s._v(" 官网。")]),s._v(" "),a("li",[a("code",[s._v("brew doctor")]),s._v(" 确认 brew 在正常工作。")]),s._v(" "),a("li",[a("code",[s._v("brew update")]),s._v(" 更新包。")]),s._v(" "),a("li",[a("code",[s._v("brew install mysql")]),s._v(" 安装 mysql。")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Downloading https://homebrew.bintray.com/bottles/mysql-5.7.17.sierra.bottle.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("######################################################################## 100.0%")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Pouring mysql-5.7.17.sierra.bottle.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Using the sandbox\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/Cellar/mysql/5.7.17/bin/mysqld --initialize-insecure --user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("liangze --basedir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/Cellar/mysql/5.7.17 --datadir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/var/mysql --t\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Caveats\nWe"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ve installed your MySQL database without a root password. To secure it run:\n    mysql_secure_installation\n\nTo connect run:\n    mysql -uroot\n\nTo have launchd start mysql now and restart at login:\n  brew services start mysql\nOr, if you don'")]),s._v("t want/need a background "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" you can just run:\n  mysql.server start\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Summary\n/usr/local/Cellar/mysql/5.7.17: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14,226")]),s._v(" files, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("444")]),s._v(".4M\n")])])]),a("p",[s._v("这里顺带提下一下，在网上有很多教程说要在安装完 mysql 之后运行")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql_install_db --verbose --user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("whoami--basedir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("brew --prefix mysql"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" --datadir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/var/mysql --tmpdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp\n")])])]),a("p",[s._v("我试了一下行不通，原因 mysql 官方已经说了，看这段：")]),s._v(" "),a("blockquote",[a("p",[s._v("mysql_install_db is deprecated as of MySQL 5.7.6 because its functionality has been integrated into mysqld, the MySQL server. To initialize a MySQL installation, invoke mysqld with the –initialize or –initialize-insecure option. For more information, see Section 2.10.1.1, “Initializing the Data Directory Manually Using mysqld”. mysql_install_db will be removed in a future MySQL release.")])]),s._v(" "),a("p",[s._v("大意就是说 mysql_install_db 这个功能已经在 MySQL 5.7.6 下取消了，它的功能现在已经集成在了 mysqld 里了。所以尽量不要直接在网上拿来主义，如果我们仔细看 brew install mysql 的安装过程，看这句：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/Cellar/mysql/5.7.17/bin/mysqld –initialize-insecure –user"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("liangze –basedir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/Cellar/mysql/5.7.17 –datadir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/var/mysql –t\n")])])]),a("p",[s._v("说明 brew 已经为我们安装好了。我们接下来需要做的 brew 也已经告诉我了，看这句：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("We’ve installed your MySQL database without a root password. To secure it run:\nmysql_secure_installation\n")])])]),a("p",[s._v("那么我们就按照 brew 的提示运行 mysql_secure_installation，运行后会报错：")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql_secure_installation\n\nSecuring the MySQL server deployment.\n\nEnter password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user root:\nError: Can"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t connect to local MySQL server through socket '")]),s._v("/tmp/mysql.sock' "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("莫慌，提示说找不到 mysql.sock。原因是 mysql 进程还没启动。")]),s._v(" "),a("p",[s._v("启动 mysql 服务")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql.server start\n")])])]),a("p",[s._v("再运行")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql_secure_installation\n")])])]),a("p",[s._v("发现成功执行命令")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Securing the MySQL server deployment.\n\nConnecting to MySQL using a blank password.\n\nVALIDATE PASSWORD PLUGIN can be used to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" passwords\nand improve security. It checks the strength of password\nand allows the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" only those passwords "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" are\nsecure enough. Would you like to setup VALIDATE PASSWORD plugin?\n\nPress y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No: y\n\nThere are three levels of password validation policy:\n\nLOW    Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nMEDIUM Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(", numeric, mixed case, and special characters\nSTRONG Length "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(", numeric, mixed case, special characters and dictionary                  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里提示选一个密码强度等级")]),s._v("\nPlease enter "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" LOW, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" MEDIUM and "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" STRONG: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nPlease "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" the password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root here.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后按照所选的密码强度要求设定密码")]),s._v("\nNew password:\n\nRe-enter new password:\n\nEstimated strength of the password: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\nDo you wish to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" with the password provided?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" y\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". Failed"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Error: Your password does not satisfy the current policy requirements\n\nNew password:\n\nRe-enter new password:\n\nEstimated strength of the password: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nDo you wish to "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("continue")]),s._v(" with the password provided?"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" y\nBy default, a MySQL installation has an anonymous user,\nallowing anyone to log into MySQL without having to have\na user account created "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" them. This is intended only "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("\ntesting, and to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" the installation go a bit smoother.\nYou should remove them before moving into a production\nenvironment.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里删除默认无密码用户")]),s._v("\nRemove anonymous users? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" y\nSuccess.\n\n\nNormally, root should only be allowed to connect from\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" This ensures that someone cannot guess at\nthe root password from the network.\n// 禁止远程root登录，我选的是不禁止。因为我的mac上的数据库不会放到公网上，也不会存什么敏感数据\nDisallow root login remotely? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" no\n\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". skipping.\nBy default, MySQL comes with a database named "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'test'")]),s._v(" that\nanyone can access. This is also intended only "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" testing,\nand should be removed before moving into a production\nenvironment.\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里删除默认自带的test数据库")]),s._v("\nRemove "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database and access to it? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" y\n - Dropping "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSuccess.\n\n - Removing privileges on "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSuccess.\n\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\nReload privilege tables now? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Press y"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Yes, any other key "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" No"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" y\nSuccess.\n\nAll done"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])])]),a("p",[s._v("最后测试一下登陆")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mysql -u root -p\n")])])]),a("p",[s._v("ALL DONE!")]),s._v(" "),a("p",[a("strong",[s._v("总结")]),s._v("\n学会使用 brew info 软件名来查看提示。以这次安装 mysql 的过程为力，网上的教程有可能有出入，和实际情况不同，但如果我们仔细查看提示，是可以靠自己完成的。")]),s._v(" "),a("blockquote",[a("p",[s._v("本文转载自"),a("a",{attrs:{href:"https://blog.csdn.net/lkxlaz/article/details/54580735",target:"_blank",rel:"noopener noreferrer"}},[s._v("[Mac] 记录使用 Homebrew 安装 Mysql 全过程"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);