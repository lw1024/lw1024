(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{389:function(a,s,t){"use strict";t.r(s);var e=t(9),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"玩转变量和环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#玩转变量和环境变量"}},[a._v("#")]),a._v(" 玩转变量和环境变量")]),a._v(" "),t("ul",[t("li",[a._v("变量在使用之前不需要声明类型，只需直接赋值；")]),a._v(" "),t("li",[a._v("每一个变量的值都是字符串；")]),a._v(" "),t("li",[a._v("有一些特殊的变量会被 shell 环境和操作系统环境用来存储一些特别的值，这类变量就被称为"),t("strong",[a._v("环境变量")]),a._v("；")])]),a._v(" "),t("h2",{attrs:{id:"_1-预备知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-预备知识"}},[a._v("#")]),a._v(" 1. 预备知识")]),a._v(" "),t("p",[t("code",[a._v("env")]),a._v(": 可查看所有与终端相关的环境变量；")]),a._v(" "),t("p",[a._v("查看某个进程的环境变量可以使用如下命令来查看：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 使用此命令查看 gedit 应用的进程ID")]),a._v("\npgrep gedit\n"),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("12501")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看进程 12501 的环境变量")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /proc/12501/environ\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("GDM_KEYBOARD_LAYOUT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("usGNOME_KEYRING_PID"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("1560USER"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("slynuxHOME"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/home/slynux\n")])])]),t("p",[a._v("每一个变量以"),t("code",[a._v("name=value")]),a._v("形式来描述，彼此之间由 "),t("code",[a._v("null")]),a._v(" 字符（"),t("code",[a._v("\\0")]),a._v("）分隔。")]),a._v(" "),t("p",[a._v("可以用 "),t("code",[a._v("tr")]),a._v(" 命令来将 "),t("code",[a._v("\\0")]),a._v(" 替换为 "),t("code",[a._v("\\n")]),a._v("，使输出更直观：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" /proc/12501/environ "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tr")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\0"}},[a._v("\\0")]),a._v("'")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[a._v("\\n")]),a._v("'")]),a._v("\n")])])]),t("h2",{attrs:{id:"_2-变量的赋值与使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-变量的赋值与使用"}},[a._v("#")]),a._v(" 2. 变量的赋值与使用")]),a._v(" "),t("p",[a._v("变量可以通过以下方式进行赋值操作：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("var")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("value "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#var是变量名；value是值，如果value包括任何空白字符，那么必须使用单引号或者双引号")]),a._v("\n")])])]),t("p",[t("strong",[a._v("注意："),t("code",[a._v("var = value")]),a._v(" 不同于 "),t("code",[a._v("var=value")]),a._v("。把 "),t("code",[a._v("var=value")]),a._v(" 写成 "),t("code",[a._v("var = value")]),a._v(" 是一个常见的错误，但前者是赋值操作，后者则是相等操作。")])]),a._v(" "),t("h3",{attrs:{id:"使用变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用变量"}},[a._v("#")]),a._v(" 使用变量")]),a._v(" "),t("p",[a._v("在变量名之前加上 "),t("code",[a._v("$")]),a._v(" 前缀就可以：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("var")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"value"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#给变量var赋值")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#使用时，如下两种方式都可以")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$var")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${var}")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Hello '),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${var}")]),a._v('"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#注意，单引号不行")]),a._v("\n")])])]),t("h3",{attrs:{id:"环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[a._v("#")]),a._v(" 环境变量")]),a._v(" "),t("p",[a._v("环境变量是未在当前进程中定义，而从父进程中继承而来的变量。")]),a._v(" "),t("p",[a._v("例如，环境变量 "),t("code",[a._v("HTTP_PROXY")]),a._v(" ，它定义了互联网联建应该使用哪个代理服务器。")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("HTTP_PROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("192.168")]),a._v(".1.23:3128\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" HTTP_PROXY "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#export命令用来设置环境变量")]),a._v("\n")])])]),t("p",[t("strong",[a._v("如何设置 "),t("code",[a._v("PATH")]),a._v(" 环境变量")])]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v(':/home/user/bin"')]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"'),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$PATH")]),a._v(':/home/user/bin"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("export")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("\n")])])]),t("h2",{attrs:{id:"_3-补充内容"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-补充内容"}},[a._v("#")]),a._v(" 3. 补充内容")]),a._v(" "),t("h3",{attrs:{id:"_1-获取字符串长度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-获取字符串长度"}},[a._v("#")]),a._v(" 1. 获取字符串长度")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("length")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("#")]),a._v("var}")]),a._v("\n")])])]),t("h3",{attrs:{id:"_2-识别当前所使用的-shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-识别当前所使用的-shell"}},[a._v("#")]),a._v(" 2. 识别当前所使用的 shell")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$SHELL")]),a._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$0")]),a._v("\n")])])]),t("h3",{attrs:{id:"_3-检查是否超级用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-检查是否超级用户"}},[a._v("#")]),a._v(" 3. 检查是否超级用户")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("$UID")]),a._v(" -ne "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("then")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" Non root user. Please run as root.\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("else")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" Root user\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fi")]),a._v("\n")])])]),t("h3",{attrs:{id:"_4-修改-bash-提示符字符串-username-hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改-bash-提示符字符串-username-hostname"}},[a._v("#")]),a._v(" 4. 修改 Bash 提示符字符串（username@hostname:~$）")]),a._v(" "),t("p",[a._v("默认的 shell 提示文本是在文件 "),t("code",[a._v("~/.bashrc")]),a._v(" 中的某一行设置的。")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("可以使用如下命令列出设置变量 "),t("code",[a._v("PS1")]),a._v(" 的那一行：")]),a._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" ~/.bashrc "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PS1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PS1")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("${debian_chroot"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":+")]),a._v("($debian_chroot)}")]),a._v("\\u@\\h:\\w\\$ '")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("如果要设置一个定制的提示字符串，可以输入：")])]),a._v(" "),t("li",[t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("sky@localhost: ~$ "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PS1")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"PROMPT>"')]),a._v("\nPROMPT"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" Type commands here "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#提示字符串已经改变")]),a._v("\n")])])]),t("blockquote",[t("p",[a._v("一些特殊的字符可以扩展成系统参数：")]),a._v(" "),t("p",[t("code",[a._v("\\u")]),a._v(": 用户名")]),a._v(" "),t("p",[t("code",[a._v("\\h")]),a._v(": 主机名")]),a._v(" "),t("p",[t("code",[a._v("\\w")]),a._v(": 当前工作目录")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);