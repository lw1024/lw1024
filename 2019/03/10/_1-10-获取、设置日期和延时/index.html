<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>获取、设置日期和延时 | 鸟鸣蝉噪之地</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="

在类 Unix 系统中，日期被存储成一个整数，其大小为自世界标准时间（UTC）1970 年 1 月 1 日 0 时 0 分 0 秒起所流失的秒数。这种计时方式称为纪元时或Unix 时间。

1. 读取日期

$ date
Mon Mar 11 14:06:36 CST 2019

2. 打印纪元时

$ date +% ...">
    
    <link rel="preload" href="/assets/css/0.styles.431a13c5.css" as="style"><link rel="preload" href="/assets/js/app.10ee7c61.js" as="script"><link rel="preload" href="/assets/js/6.8686932d.js" as="script"><link rel="preload" href="/assets/js/3.a398a0c8.js" as="script"><link rel="preload" href="/assets/js/24.1ee51cb8.js" as="script"><link rel="prefetch" href="/assets/js/10.1836bc1c.js"><link rel="prefetch" href="/assets/js/11.6370d946.js"><link rel="prefetch" href="/assets/js/12.f4de84ef.js"><link rel="prefetch" href="/assets/js/13.4aa22322.js"><link rel="prefetch" href="/assets/js/14.9daa7500.js"><link rel="prefetch" href="/assets/js/15.7ae91d87.js"><link rel="prefetch" href="/assets/js/16.0fce0ab7.js"><link rel="prefetch" href="/assets/js/17.ab0071e8.js"><link rel="prefetch" href="/assets/js/18.0e559503.js"><link rel="prefetch" href="/assets/js/19.67229124.js"><link rel="prefetch" href="/assets/js/20.4ac0a1b8.js"><link rel="prefetch" href="/assets/js/21.ac12c05d.js"><link rel="prefetch" href="/assets/js/22.0fafb75d.js"><link rel="prefetch" href="/assets/js/23.190164b1.js"><link rel="prefetch" href="/assets/js/25.2bfc29d8.js"><link rel="prefetch" href="/assets/js/26.051875ff.js"><link rel="prefetch" href="/assets/js/27.889b3ea3.js"><link rel="prefetch" href="/assets/js/28.d57758c8.js"><link rel="prefetch" href="/assets/js/29.fc51d102.js"><link rel="prefetch" href="/assets/js/30.94f1194f.js"><link rel="prefetch" href="/assets/js/31.a2e5eb31.js"><link rel="prefetch" href="/assets/js/32.33be3f22.js"><link rel="prefetch" href="/assets/js/33.dccb7f2f.js"><link rel="prefetch" href="/assets/js/34.d6d3e5c9.js"><link rel="prefetch" href="/assets/js/35.76d165cf.js"><link rel="prefetch" href="/assets/js/36.14d0d2d0.js"><link rel="prefetch" href="/assets/js/37.dbd63836.js"><link rel="prefetch" href="/assets/js/4.5ad9bf18.js"><link rel="prefetch" href="/assets/js/5.5dccfb39.js"><link rel="prefetch" href="/assets/js/7.aab8bd40.js"><link rel="prefetch" href="/assets/js/8.705d90ab.js"><link rel="prefetch" href="/assets/js/9.30ed3258.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.8db55f50.js">
    <link rel="stylesheet" href="/assets/css/0.styles.431a13c5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">鸟鸣蝉噪之地 </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">鸟鸣蝉噪之地 </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><div class="content__default"><h1 id="获取、设置日期和延时"><a href="#获取、设置日期和延时" class="header-anchor">#</a> 获取、设置日期和延时</h1> <p>在类 Unix 系统中，日期被存储成一个整数，其大小为自<strong>世界标准时间</strong>（UTC）1970 年 1 月 1 日 0 时 0 分 0 秒起所流失的秒数。这种计时方式称为<strong>纪元时</strong>或<strong>Unix 时间</strong>。</p> <h2 id="_1-读取日期"><a href="#_1-读取日期" class="header-anchor">#</a> 1. 读取日期</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">date</span>
Mon Mar <span class="token number">11</span> <span class="token number">14</span>:06:36 CST <span class="token number">2019</span>
</code></pre></div><h2 id="_2-打印纪元时"><a href="#_2-打印纪元时" class="header-anchor">#</a> 2. 打印纪元时</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">date</span> +%s
<span class="token number">1552284421</span>
</code></pre></div><p>将指定日期转换成纪元时：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">date</span> --date <span class="token string">&quot;Thu Feb 28 16:58:10 CST 2019&quot;</span> +%s
<span class="token comment">#--date用于提供日期串作为输入（也可以是 -d）</span>
</code></pre></div><p>上面的命令在 OS X 系统中执行报错，只能使用下面这中格式：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">date</span> -j -f <span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span> <span class="token string">&quot;2015-09-28 10:20:32&quot;</span> +%s
<span class="token number">1443406832</span>
</code></pre></div><h2 id="_3-格式化输出"><a href="#_3-格式化输出" class="header-anchor">#</a> 3. 格式化输出</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">date</span> <span class="token string">&quot;+%d %B %Y&quot;</span>
<span class="token number">11</span> March <span class="token number">2019</span>
</code></pre></div><h2 id="_4-设置日期和时间"><a href="#_4-设置日期和时间" class="header-anchor">#</a> 4. 设置日期和时间</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">date</span> -s <span class="token string">&quot;Thu Feb 28 16:16:52 CST 2019&quot;</span>
<span class="token comment">#需要管理员权限</span>
</code></pre></div><h2 id="_5-测试脚本执行时间"><a href="#_5-测试脚本执行时间" class="header-anchor">#</a> 5. 测试脚本执行时间</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>

<span class="token assign-left variable">start</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>

<span class="token comment"># 需要执行的脚本……</span>

<span class="token assign-left variable">end</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%s<span class="token variable">)</span></span>
<span class="token assign-left variable">difference</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span> end <span class="token operator">-</span> start<span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> Time taken to execute commands is <span class="token variable">$difference</span> seconds.
</code></pre></div><h2 id="_6-在脚本中生成延时"><a href="#_6-在脚本中生成延时" class="header-anchor">#</a> 6. 在脚本中生成延时</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/sh</span>

<span class="token builtin class-name">echo</span> -n Count: <span class="token punctuation">;</span>
tput sc<span class="token punctuation">;</span>  <span class="token comment">#存储光标位置</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> -lt <span class="token number">40</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">let</span> count++<span class="token punctuation">;</span>
    <span class="token function">sleep</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment">#延时1秒</span>
    tput rc<span class="token punctuation">;</span>  <span class="token comment">#恢复光标位置</span>
    tput ed<span class="token punctuation">;</span>  <span class="token comment">#清除从当前光标位置到行尾之间的所有内容</span>
    <span class="token builtin class-name">echo</span> -n <span class="token variable">$count</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    <span class="token builtin class-name">exit</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">fi</span>
<span class="token keyword">done</span>
</code></pre></div><h2 id="格式字符标"><a href="#格式字符标" class="header-anchor">#</a> 格式字符标</h2> <table><thead><tr><th style="text-align:left;">日期内容</th> <th style="text-align:left;">格式</th></tr></thead> <tbody><tr><td style="text-align:left;">星期</td> <td style="text-align:left;"><code>%a</code> （例如： Sat）<br> <code>%A</code> （例如： Saturday）<br> <code>%w</code> （例如：3）</td></tr> <tr><td style="text-align:left;">月</td> <td style="text-align:left;"><code>%b</code> （例如：Nov）<br><code>%B</code> （例如：November）<br><code>%m</code> （例如：03）</td></tr> <tr><td style="text-align:left;">日</td> <td style="text-align:left;"><code>%d</code> （例如：31）</td></tr> <tr><td style="text-align:left;">固定格式日期（mm/dd/yy）</td> <td style="text-align:left;"><code>%D</code> （例如：10/18/10）</td></tr> <tr><td style="text-align:left;">年</td> <td style="text-align:left;"><code>%y</code> （例如：10）<br><code>%Y</code> （例如：2010）</td></tr> <tr><td style="text-align:left;">小时</td> <td style="text-align:left;"><code>%I</code>或<code>%H</code> （例如：08）</td></tr> <tr><td style="text-align:left;">分钟</td> <td style="text-align:left;"><code>%M</code> （例如：33）</td></tr> <tr><td style="text-align:left;">秒</td> <td style="text-align:left;"><code>%S</code> （例如：10）</td></tr> <tr><td style="text-align:left;">纳秒</td> <td style="text-align:left;"><code>%N</code> （例如：254354）</td></tr> <tr><td style="text-align:left;">Unix 纪元时（以秒为单位）</td> <td style="text-align:left;"><code>%s</code> （例如：1551342521）</td></tr> <tr><td style="text-align:left;">时区</td> <td style="text-align:left;"><code>%Z</code> （例如：CST）<br><code>%z</code> （例如：+0800）</td></tr></tbody></table></div> <!----> <hr> <!----></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#_1-读取日期" title="1. 读取日期">1. 读取日期</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_2-打印纪元时" title="2. 打印纪元时">2. 打印纪元时</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_3-格式化输出" title="3. 格式化输出">3. 格式化输出</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_4-设置日期和时间" title="4. 设置日期和时间">4. 设置日期和时间</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_5-测试脚本执行时间" title="5. 测试脚本执行时间">5. 测试脚本执行时间</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#_6-在脚本中生成延时" title="6. 在脚本中生成延时">6. 在脚本中生成延时</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#格式字符标" title="格式字符标">格式字符标</a></div></div></div></div> <footer class="footer" data-v-582f9766><div class="footer-left-wrap" data-v-582f9766><ul class="contact" data-v-582f9766><li class="contact-item" data-v-582f9766><a href="https://github.com/lw1024" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-582f9766><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-582f9766><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-582f9766></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-582f9766><ul class="copyright" data-v-582f9766><li class="copyright-item" data-v-582f9766><a href="http://beian.miit.gov.cn" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-582f9766>苏ICP备18061680号</a></li><li class="copyright-item" data-v-582f9766><a href="/" class="nav-link" data-v-582f9766>Copyright © 2020 Luwei</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.10ee7c61.js" defer></script><script src="/assets/js/6.8686932d.js" defer></script><script src="/assets/js/3.a398a0c8.js" defer></script><script src="/assets/js/24.1ee51cb8.js" defer></script>
  </body>
</html>
